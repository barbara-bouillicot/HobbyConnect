
<body>
  <%= link_to '/chatrooms', class: "back-button" do %>
    <i class="fa-sharp fa-solid fa-circle-arrow-left"></i>
  <% end %>

  <div class="container chatroom" data-controller="chatroom-subscription" data-chatroom-subscription-chatroom-id-value="<%= @chatroom.id %>">
  <% if @chatroom.asker == current_user %>
    <h1><%= link_to user_profile_path(@chatroom.receiver), class: "no-link" do %>
      <%= cl_image_tag(@chatroom.receiver.photo.key, class: "avatar") if @chatroom.receiver.photo.attached? %>
      <%= @chatroom.receiver.username %>
    <% end %></h1>
  <% else %>
    <h1><%= link_to user_path(@chatroom.asker), class: "no-link" do %>
      <%= cl_image_tag(@chatroom.asker.photo.key, class: "avatar") if @chatroom.asker.photo.attached? %>
      <%= @chatroom.asker.username %>
    <% end %></h1>
  <% end %>
  <div class="messages" data-chatroom-subscription-target="messages">
    <% @chatroom.messages.each do |message| %>
      <%= render "messages/message", message: message %>
    <% end %>
  </div>
</div>


  <%= simple_form_for [@chatroom, @message],
    html: { data: { action: "turbo:submit-end->chatroom-subscription#resetForm" }, class: "d-flex" } do |f| %>
    <%= f.input :content,
      label: false,
      placeholder: "Message your new buddy here...",
      wrapper_html: {class: "flex-grow-1"}
    %>
    <%= f.submit "Send", class: "btn btn-primary mb-3" %>
  <% end %>
</div>
</body>
